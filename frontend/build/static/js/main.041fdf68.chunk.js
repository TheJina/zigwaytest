(window.webpackJsonpfrontendtest=window.webpackJsonpfrontendtest||[]).push([[0],{45:function(e,a,t){e.exports=t(81)},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},79:function(e,a,t){e.exports=t.p+"static/media/team-1-800x800.53033970.jpg"},80:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(38),c=t.n(l),s=(t(50),t(51),t(52),t(53),t(10)),o=t(17),m=t(11),i=t(12),p=t(14),u=t(13),d=t(15),g=t(82),E=t(83),h=t(84),f=t(85),w=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(p.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"section section-lg section-shaped"},r.a.createElement("div",{className:"shape shape-style-1 shape-default"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement(g.a,{className:"py-md"},r.a.createElement(E.a,{className:"row-grid justify-content-between align-items-center"},r.a.createElement(h.a,{lg:"6"},r.a.createElement("h3",{className:"display-3 text-white"},"Zigway Django React JWT Test"),r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement(f.a,{color:"default",to:"/login-page",tag:s.b},"Login Page"),r.a.createElement(f.a,{className:"btn-white",color:"default",to:"/register-page",tag:s.b},"Register Page")))))))}}]),a}(r.a.Component),y=t(20),b=t(86),j=t(87),v=t(88),N=t(89),O=t(90),_=t(91),x=t(43),S=t(92);function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}var P=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(p.a)(this,Object(u.a)(a).call(this))).handle_change=function(a){var t=a.target.name,n=a.target.value;e.setState(function(e){var a=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(t,!0).forEach(function(a){Object(y.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},e);return a[t]=n,a})},e.handle_login=function(a){a.preventDefault();var t={username:e.state.username,password:e.state.password};fetch("http://localhost:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(a){a.ok?a.json().then(function(a){localStorage.setItem("jwta",a.access),localStorage.setItem("jwtr",a.refresh),e.setState({logged_in:!0})}):alert("Unauthorized access")})},e.state={username:"",password:"",logged_in:!!localStorage.getItem("jwta")},e}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return this.state.logged_in?r.a.createElement(o.a,{to:"/profile-page"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:"main"},r.a.createElement("section",{className:"section section-lg section-shaped"},r.a.createElement("h3",{className:"display-3 text-white text-center"},"User Login "),r.a.createElement("div",{className:"shape shape-style-1 shape-default"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement(g.a,{className:"pt-lg-md"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(h.a,{lg:"5"},r.a.createElement(b.a,{className:"bg-secondary shadow border-0"},r.a.createElement(j.a,{className:"px-lg-5 py-lg-5"},r.a.createElement(v.a,{role:"form"},r.a.createElement(N.a,{className:"mb-3"},r.a.createElement(O.a,{className:"input-group-alternative"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-circle-08"}))),r.a.createElement(S.a,{placeholder:"Username",type:"text",name:"username",onChange:this.handle_change,required:!0}))),r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-lock-circle-open"}))),r.a.createElement(S.a,{placeholder:"Password",type:"password",name:"password",autoComplete:"off",onChange:this.handle_change,required:!0}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(f.a,{className:"my-4",color:"primary",onClick:this.handle_login},"Sign in"))))),r.a.createElement(E.a,{className:"mt-3"},r.a.createElement(h.a,{className:"text-center",xs:"12"},r.a.createElement(f.a,{to:"/register-page",tag:s.b},"Create New Account")))))))))}}]),a}(r.a.Component),C=t(25),I=t.n(C),T=t(44),D=t(26),q=t.n(D),U=t(18),R=t.n(U),A=t(19),F=t.n(A),J=q.a.create({baseURL:"http://localhost:8000"});J.interceptors.request.use(function(){var e=Object(T.a)(I.a.mark(function e(a){var t,n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n={},window.localStorage.getItem("jwta")&&window.localStorage.getItem("jwtr")&&(t=F()(window.localStorage.getItem("jwta")),n=F()(window.localStorage.getItem("jwtr"))),!(t.exp<R()().unix()&&n.exp>R()().unix())){e.next=10;break}return e.next=6,q.a.post("http://localhost:8000/api/token/refresh/",{refresh:window.localStorage.getItem("jwtr")});case 6:r=e.sent,window.localStorage.setItem("jwta",r.data.access),window.localStorage.setItem("jwtr",r.data.refresh),t=F()(r.data.access);case 10:return t.exp>R()().unix()&&(a.headers.Authorization="Bearer ".concat(window.localStorage.getItem("jwta"))),t.exp<R()().unix()&&n.exp<R()().unix()&&(window.localStorage.clear(),window.location="/login-page"),e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()),J.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&(window.localStorage.clear(),window.location="/"),Promise.reject(e.response)});var L=J,z=t(19),B=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(p.a)(this,Object(u.a)(a).call(this))).handle_logout=function(){localStorage.removeItem("jwta"),localStorage.removeItem("jwtr"),e.setState({logged_in:!1,username:""})},e.state={logged_in:!!localStorage.getItem("jwta"),username:"",first_name:"",last_name:"",email:""},e}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.state.logged_in){var a=z(localStorage.getItem("jwta")).user_id;L.get("/api/users/"+a+"/").then(function(a){e.setState({username:a.data.username,first_name:a.data.first_name,last_name:a.data.last_name,email:a.data.email})})}}},{key:"render",value:function(){return this.state.logged_in?r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"profile-page",ref:"main"},r.a.createElement("section",{className:"section-profile-cover section-shaped my-0"},r.a.createElement("div",{className:"shape shape-style-1 shape-default alpha-4"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("div",{className:"separator separator-bottom separator-skew"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},r.a.createElement("polygon",{className:"fill-white",points:"2560 0 2560 100 0 100"})))),r.a.createElement("section",{className:"section"},r.a.createElement(g.a,null,r.a.createElement(b.a,{className:"card-profile shadow mt--300"},r.a.createElement("div",{className:"px-4"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(h.a,{className:"order-lg-2",lg:"3"},r.a.createElement("div",{className:"card-profile-image"},r.a.createElement("img",{alt:"...",className:"rounded-circle",src:t(79)}))),r.a.createElement(h.a,{className:"order-lg-3 text-lg-right align-self-lg-center",lg:"4"},r.a.createElement("div",{className:"card-profile-actions py-4 mt-lg-0"},r.a.createElement(f.a,{className:"mr-4",color:"danger",href:"#pablo",onClick:this.handle_logout,size:"sm"},"Logout")))),r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h3",null,this.state.username," "),r.a.createElement("div",{className:"h6 font-weight-300"},this.state.first_name," ",this.state.last_name),r.a.createElement("div",{className:"h6 mt-4"},r.a.createElement("i",{className:"ni business_briefcase-24 mr-2"}),this.state.email)))))))):r.a.createElement(o.a,{to:"/login-page"})}}]),a}(r.a.Component);function M(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}var W=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(p.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",first_name:"",last_name:"",email:"",password:"",logged_in:!1},t.handle_change=function(e){var a=e.target.name,n=e.target.value;t.setState(function(e){var t=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?M(t,!0).forEach(function(a){Object(y.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},e);return t[a]=n,t})},t.handle_signup=function(e){e.preventDefault();var a={username:t.state.username,first_name:t.state.first_name,last_name:t.state.last_name,email:t.state.email,password:t.state.password};fetch("http://localhost:8000/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){e.ok?e.json().then(function(e){localStorage.setItem("jwta",e.tokens.access),localStorage.setItem("jwtr",e.tokens.refresh),t.setState({logged_in:!0})}):alert("Registeration Unsuccessful!")})},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0}},{key:"render",value:function(){return this.state.logged_in?r.a.createElement(o.a,{to:"/profile-page"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:"main"},r.a.createElement("section",{className:"section section-lg section-shaped"},r.a.createElement("h3",{className:"display-3 text-white text-center"},"Register User "),r.a.createElement("div",{className:"shape shape-style-1 shape-default"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement(g.a,{className:"pt-lg-md"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(h.a,{lg:"5"},r.a.createElement(b.a,{className:"bg-secondary shadow border-0"},r.a.createElement(j.a,{className:"px-lg-5 py-lg-5"},r.a.createElement(v.a,{role:"form"},r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative mb-3"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-circle-08"}))),r.a.createElement(S.a,{placeholder:"Username",type:"text",name:"username",onChange:this.handle_change,required:!0}))),r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative mb-3"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-circle-08"}))),r.a.createElement(S.a,{placeholder:"Firstname",type:"text",name:"first_name",onChange:this.handle_change,required:!0}))),r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative mb-3"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-circle-08"}))),r.a.createElement(S.a,{placeholder:"Lastname",type:"text",name:"last_name",onChange:this.handle_change,required:!0}))),r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative mb-3"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-email-83"}))),r.a.createElement(S.a,{placeholder:"Email",type:"email",name:"email",onChange:this.handle_change,required:!0}))),r.a.createElement(N.a,null,r.a.createElement(O.a,{className:"input-group-alternative"},r.a.createElement(_.a,{addonType:"prepend"},r.a.createElement(x.a,null,r.a.createElement("i",{className:"ni ni-lock-circle-open"}))),r.a.createElement(S.a,{placeholder:"Password",type:"password",autoComplete:"off",name:"password",onChange:this.handle_change,required:!0}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(f.a,{className:"mt-4",color:"primary",type:"submit",onClick:this.handle_signup},"Create account")))))))))))}}]),a}(r.a.Component);t(80);var Z=function(){return r.a.createElement(s.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(w,e)}}),r.a.createElement(o.b,{path:"/login-page",exact:!0,render:function(e){return r.a.createElement(P,e)}}),r.a.createElement(o.b,{path:"/profile-page",exact:!0,render:function(e){return r.a.createElement(B,e)}}),r.a.createElement(o.b,{path:"/register-page",exact:!0,render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(o.a,{to:"/"})))};c.a.render(r.a.createElement(Z,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.041fdf68.chunk.js.map